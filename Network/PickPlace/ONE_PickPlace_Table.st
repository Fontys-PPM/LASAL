//This file was generated by the LASAL2 CodeGenerator  -- 
//Please, do not edit this file (it might be overwritten by the next generator run)
#define OBJECTS_CONFIG

//Define part of class _LMCAxisBase
//#define _DEBUG_MODUS_MUTEX_OFF
//#define _DEBUG_MODUS_ISSYNCHRON
//#define _DEBUG_MODUS_CHECKSWLIMIT


#define _LMCAXIS_NORMOVERRIDE         1000    // Dieser Override-Wert entspricht 100%.
#define _LMCAXIS_MAXOVERRIDE	        1000		// Maximalwert für Override im LMCAXISBASE (kann mit SetParameter verändert werden.)
#define _LMCAXIS_MINOVERRIDE	           0		// Minimalwert für Override im _LMCAxisBase --> damit man mit Minuswerten nicht in die falsche Richtung fahren kann

#define _LMCAXIS_MIN_POS       -16#07000000    // default MINPOS when INITvalue=0
#define _LMCAXIS_MAX_POS        16#07000000    // default MAXPOS when INITvalue=0

#define _LMCAXIS_OVERVFLOW_POS  16#06000000    // MAX POSITION for checking overflow

#define _LMCAXIS_INVALID_POS    16#3FFFFFFF    // Invalid position for calculating the velocity

#define _LMCAXIS_INTERVAL            10            // original = 10

#define _LMCAXIS_MAX_MASTERDELAY     7    // maximum cycles for delaying the coupling to the master


#define _LMCAXIS_RESO_CALBREMS 100

#ifndef _VOID_POS
  #define  _VOID_POS 16#7FFFFFFF 
#endif

/////////////////////
// Polynom 5ten Grades
#define _LMCAXIS_Poly_Pos_A     2.5
#define _LMCAXIS_Poly_Pos_B     3.0
#define _LMCAXIS_Poly_Pos_C     1.0

#define LMC_POLYNOM_V0          0                     // CoupleGearPolynom wenn Slave steht
#define LMC_POLYNOM_V           1                     // CoupleGearPolynom wenn Slave fährt

//////////////////////
// Bewegungsrichtungen
#define _LMCAXIS_MOVE_ANY_WAY              0       // beide Richtungen
#define _LMCAXIS_MOVE_NEG_DIR              1       // nur negative Bewegungsrichtung
#define _LMCAXIS_MOVE_SHORTEST_WAY         2       // kürzester Weg (beide Richtungen)
#define _LMCAXIS_MOVE_POS_DIR              3       // nur positive Bewegungsrichtung

//////////////////////
// Mutex
#define MUTEX_NAME_MAX_LENGTH_LMCAXIS     32   //maximale Anzahl an Zeichen für den Mutexnamen
#define MUTEX_NAME_END_LENGTH_LMCAXIS      3
#define STR_MUTEX_NAME_SEPERATOR_LMCAXIS ".."


#define _LMCAXIS_WAITTIMEPOWERON           90sec    // Wartezeit bei PowerOn bis TimeOut entsteht (maximale Kommutierungszeitdauer beim DiasDrive für Linearmotoren sind 86sec)
#define _LMCAXIS_WAITTIMEPOWEROFF           1sec    // Wartezeit bei PowerOff bis TimeOut entsteht


#define _LMCAXIS_Max_V_FILTER_SIZE   100

//////////////////////
// ruckbegrenzter Modus _JERK_PROFILE
#define MIN_SHRINK_FACTOR_4_CORRECTTOEXACTPOS 0.9
#define MAX_SHRINK_FACTOR_4_CORRECTTOEXACTPOS_FAR 1.2
#define MAX_SHRINK_FACTOR_4_CORRECTTOEXACTPOS_NEAR 5.0
#define MAX_SHRINK_FACTOR_4_CORRECTTOEXACTPOS_WINDOW 5.0


#define MAX_TIME_TO_WAIT_4_BRAKING 3.0 //in Ticks
#define MAX_DURATION_WITH_MAX_ACCEL_TO_MASTER 20000  //in Ticks
#define ALLOWED_AJMP_FACTOR 1.1
#define FACTOR_4_ALLOWED_MASTER_ACCEL_PROFILE_COUPLING 1.2
#define ACCEL_FACTOR_4_PROFILE_COUPLING 1.1
#define JERK_FACTOR_4_PROFILE_COUPLING 1.2

//////////////////////
// LREAL Modi
// #define DEBUG_TRAP_DELTA_ACCEL
#define _LMCAXIS_LREAL_EPSILON 0.000001

#ifndef _DINT_MIN
#define _DINT_MIN -2147483648
#endif

#ifndef _DINT_MAX
#define _DINT_MAX 2147483647
#endif

#define _LMCAXIS_MIN_VEL_MOVECMD 1 // minimale programmierbare Geschwindigkeit für LREAL-MoveTypes [internal units / sec]



//+++ einbau HP 13.9.2011 +++++++++++++++++++++++++++++++++++++++++++++++++++++++

//////////////////////
// CoupleGearPolynom
#define _LMCAXIS_FACTOR_JMAX         10
#define _LMCAXIS_FACTOR_T_VAL_X      0.80
#define _LMCAXIS_FACTOR_T_VAL_Z      0.80
#define _LMCAXIS_MIN_TICKS           0

//#define REPORT_TRAPEZOIDSPLINE_DISABLED 
#undef REPORT_TRAPEZOIDSPLINE_DISABLED

// Formeltest und Test auf numerische Genauigkeit
//#define CHECK_PRECISION

#define PRAEFIX_KILO          1000

//+++++++++++++++++++++++++++++++++++++++++++++++++++++++ einbau HP 13.9.2011 +++
#include <.\lsl_st_systrace.h>
#include "..\..\Class\_LMCAxisBase\C_MathAxis.h"
#include "..\..\Class\_LMCAxisBase\_LMCTraceView.h"
//Define part of class _LMCMathFunctions
#define _INT_DEG                       * 1024 * 1000 //Internal Resolution of Degrees
#define LMC_PI                          3.1415926535897932384626433832795   //LMC_ avoids name clash

#define _LMC_EPSILON    0.000001
#define _MATH_EPSILON   0.000000001

#ifndef _DINT_MIN
  #define _DINT_MIN -2147483648
#endif

#define LMC_NUMERIC_TOLERANCE   (0.000000001)

// 25µsec für ein repeat auf ARM CP 111
#define LMC_MAX_REPEAT      25

// Geschwindigkeit wird auf 1 interne Einheit genau iteriert
#define PRECIS_REPEAT   (1.0)
#include "..\..\Class\_LMCMathFunctions\C_MathFunct.h"
//Define part of class DrivePosControl
#DEFINE MaxDragDelayCycles 20


#define _SDD_NEWINSTPDO 100
#define _SDD_READPDODATAv1 101
#define _SDD_WRITEPDODATAv1 102


FUNCTION GLOBAL TAB ONE_PickPlace
-1$UINT, 0$UINT, 
0$UINT, 0$UINT,

17$UDINT,
TO_UDINT(1047453148), "_AxisBase", 1$UINT, 53$UINT, 0$UINT,
TO_UDINT(3162349954), "_LMCABSEncoder", 1$UINT, 0$UINT, 1$UINT,
TO_UDINT(1422175863), "_LMCAxis", 1$UINT, 85$UINT, 1$UINT,
TO_UDINT(280984637), "_LMCAxisBase", 2$UINT, 76$UINT, 0$UINT,
TO_UDINT(2147194214), "_LMCAxisRef", 1$UINT, 31$UINT, 1$UINT,
TO_UDINT(3113915997), "_LMCAxisVis", 1$UINT, 36$UINT, 1$UINT,
TO_UDINT(3511906983), "_LMCAxisVisInt", 1$UINT, 57$UINT, 1$UINT,
TO_UDINT(1670072687), "_LMCAxisVisLogHandle", 1$UINT, 0$UINT, 1$UINT,
TO_UDINT(4049061347), "_LMCAxisVisLogViewer", 1$UINT, 0$UINT, 5$UINT,
TO_UDINT(3953984284), "_LMCAxisVisPara", 1$UINT, 13$UINT, 1$UINT,
TO_UDINT(838927485), "_LMCMathFunctions", 1$UINT, 68$UINT, 1$UINT,
TO_UDINT(1117088251), "_LMCPublisher", 1$UINT, 0$UINT, 1$UINT,
TO_UDINT(1736530975), "_LMCRefBase", 1$UINT, 11$UINT, 0$UINT,
TO_UDINT(3213872914), "_LMCSafety", 1$UINT, 21$UINT, 1$UINT,
TO_UDINT(1198357413), "Controller", 1$UINT, 42$UINT, 0$UINT,
TO_UDINT(856977503), "DrivePosControl", 1$UINT, 82$UINT, 1$UINT,
TO_UDINT(1637991794), "RefSwitchCurrent", 0$UINT, 0$UINT, 1$UINT,


1$UINT, TO_UDINT(221274390), "_ZAXIS\_LMCABSENCODER1", 

_NO_ATTR, TO_UDINT(2892462265), "_ZAXIS", 


1$UINT, TO_UDINT(145261078), "_ZAXIS\_LMCAXISREF1", 

1$UINT, TO_UDINT(3110406705), "_ZAXIS\_LMCAXISVIS1", 

1$UINT, TO_UDINT(2401981280), "_ZAXIS\_LMCAXISVIS1\_LMCAXISVISINT1", 

1$UINT, TO_UDINT(3014142978), "_ZAXIS\_LMCAXISVIS1\_LMCAXISVISLOGHANDLE1", 

1$UINT, TO_UDINT(1463041925), "_ZAXIS\_LMCAXISVIS1\_LMCAXISVISLOGVIEWER1", 
1$UINT, TO_UDINT(3460132415), "_ZAXIS\_LMCAXISVIS1\_LMCAXISVISLOGVIEWER2", 
1$UINT, TO_UDINT(3107610281), "_ZAXIS\_LMCAXISVIS1\_LMCAXISVISLOGVIEWER3", 
1$UINT, TO_UDINT(660523786), "_ZAXIS\_LMCAXISVIS1\_LMCAXISVISLOGVIEWER4", 
1$UINT, TO_UDINT(1348074396), "_ZAXIS\_LMCAXISVIS1\_LMCAXISVISLOGVIEWER5", 

1$UINT, TO_UDINT(3502261597), "_ZAXIS\_LMCAXISVIS1\_LMCAXISVISPARA1", 

1$UINT, TO_UDINT(3203432070), "_ZAXIS\_LMCMATHFUNCTIONS1", 

1$UINT, TO_UDINT(1206757461), "_ZAXIS\_LMCPUBLISHER1", 


1$UINT, TO_UDINT(3321155340), "_ZAXIS\_LMCSAFETY1", 


_NO_ATTR, TO_UDINT(2520110734), "DRIVEPOSCONTROL3", 

_NO_ATTR, TO_UDINT(3552067406), "REFSWITCHCURRENT3", 

//Internal connections
0$UDINT,
14$UDINT,
TO_UDINT(1), "_LMCMathFunctions1", TO_UDINT(12),
TO_UDINT(1), "_LMCABSEncoder1", TO_UDINT(0),
TO_UDINT(1), "_LMCAxisVis1", TO_UDINT(3),
TO_UDINT(1), "_LMCAxisRef1", TO_UDINT(2),
TO_UDINT(1), "_LMCSafety1", TO_UDINT(14),
TO_UDINT(1), "_LMCPublisher1", TO_UDINT(13),
TO_UDINT(3), "_LMCAxisVisInt1", TO_UDINT(4),
TO_UDINT(3), "_LMCAxisVisPara1", TO_UDINT(11),
TO_UDINT(3), "_LMCAxisVisLogViewer1", TO_UDINT(6),
TO_UDINT(3), "_LMCAxisVisLogViewer2", TO_UDINT(7),
TO_UDINT(3), "_LMCAxisVisLogViewer3", TO_UDINT(8),
TO_UDINT(3), "_LMCAxisVisLogViewer4", TO_UDINT(9),
TO_UDINT(3), "_LMCAxisVisLogViewer5", TO_UDINT(10),
TO_UDINT(3), "_LMCAxisVisLogHandle1", TO_UDINT(5),
0$UDINT,
15$UDINT,
TO_UDINT(1), "LMCController", TO_UDINT(15), "Signal_Input",
TO_UDINT(1), "LMCMath", TO_UDINT(12), "ClassSvr",
TO_UDINT(1), "LMCSafety", TO_UDINT(14), "ClassSvr",
TO_UDINT(1), "LMCReference", TO_UDINT(2), "RefInput",
TO_UDINT(1), "LMCAbsEncoder", TO_UDINT(0), "ClassSvr",
TO_UDINT(1), "LMCPublisher", TO_UDINT(13), "ClassSvr",
TO_UDINT(1), "RefSwitch", TO_UDINT(16), "Switch",
TO_UDINT(3), "LMCAxisBase", TO_UDINT(1), "Control",
TO_UDINT(4), "LMCAxisVisPara", TO_UDINT(11), "ClassSvr",
TO_UDINT(6), "LogIndex", TO_UDINT(5), "LogIndex",
TO_UDINT(7), "LogIndex", TO_UDINT(5), "LogIndex",
TO_UDINT(8), "LogIndex", TO_UDINT(5), "LogIndex",
TO_UDINT(9), "LogIndex", TO_UDINT(5), "LogIndex",
TO_UDINT(10), "LogIndex", TO_UDINT(5), "LogIndex",
TO_UDINT(11), "ocLMCAxisVisInt", TO_UDINT(4), "ClassSvr",

//Initialization values
0$UDINT,
26$UDINT,
TO_UDINT(1), "SimulateMode", TO_UDINT(0),//|PickPlace._ZAxis.SimulateMode;
TO_UDINT(1), "ExUnits", TO_UDINT(65536),//|PickPlace._ZAxis.ExUnits;
TO_UDINT(1), "IntUnits", TO_UDINT(165000),//|PickPlace._ZAxis.IntUnits;
TO_UDINT(1), "VMax", TO_UDINT(500000),//|PickPlace._ZAxis.VMax;
TO_UDINT(1), "AMax", TO_UDINT(5000000),//|PickPlace._ZAxis.AMax;
TO_UDINT(1), "Tjerk", TO_UDINT(0),//|PickPlace._ZAxis.Tjerk;
TO_UDINT(1), "MoveType", TO_UDINT(_RAMP_Profile),//|PickPlace._ZAxis.MoveType;
TO_UDINT(1), "Resolution", TO_UDINT(1),//|PickPlace._ZAxis.Resolution;
TO_UDINT(1), "Modulo", TO_UDINT(0),//|PickPlace._ZAxis.Modulo;
TO_UDINT(1), "SWMinPos", TO_UDINT(0),//|PickPlace._ZAxis.SWMinPos;
TO_UDINT(1), "SWMaxPos", TO_UDINT(0),//|PickPlace._ZAxis.SWMaxPos;
TO_UDINT(1), "ErrorConfig", TO_UDINT(2#0000000001000000),//|PickPlace._ZAxis.ErrorConfig;
TO_UDINT(1), "AEmergency", TO_UDINT(0),//|PickPlace._ZAxis.AEmergency;
TO_UDINT(1), "JMax", TO_UDINT(0),//|PickPlace._ZAxis.JMax;
TO_UDINT(1), "Config", TO_UDINT(0),//|PickPlace._ZAxis.Config;
TO_UDINT(1), "ID", TO_UDINT(0),//|PickPlace._ZAxis.ID;
TO_UDINT(4), "TriangleMode", TO_UDINT(1),//|PickPlace._LMCAxisVis1\_ZAxis\_LMCAxisVisInt1.TriangleMode;
TO_UDINT(6), "LogOffset", TO_UDINT(0),//|PickPlace._LMCAxisVis1\_ZAxis\_LMCAxisVisLogViewer1.LogOffset;
TO_UDINT(7), "LogOffset", TO_UDINT(1),//|PickPlace._LMCAxisVis1\_ZAxis\_LMCAxisVisLogViewer2.LogOffset;
TO_UDINT(8), "LogOffset", TO_UDINT(2),//|PickPlace._LMCAxisVis1\_ZAxis\_LMCAxisVisLogViewer3.LogOffset;
TO_UDINT(9), "LogOffset", TO_UDINT(3),//|PickPlace._LMCAxisVis1\_ZAxis\_LMCAxisVisLogViewer4.LogOffset;
TO_UDINT(10), "LogOffset", TO_UDINT(4),//|PickPlace._LMCAxisVis1\_ZAxis\_LMCAxisVisLogViewer5.LogOffset;
TO_UDINT(11), "MovRefPosWindow", TO_UDINT(0),//|PickPlace._LMCAxisVis1\_ZAxis\_LMCAxisVisPara1.MovRefPosWindow;
TO_UDINT(13), "Config", TO_UDINT(0),//|PickPlace._ZAxis\_LMCPublisher1.Config;
TO_UDINT(13), "ID", TO_UDINT(0),//|PickPlace._ZAxis\_LMCPublisher1.ID;
TO_UDINT(15), "SetConf", TO_UDINT(2#101),//|PickPlace.DrivePosControl3.SetConf;

//Symbolic initialization values
0$UDINT,
0$UDINT,

//Initialization of string values
0$UDINT,
0$UDINT,

//Configuration of tasks (RealTime, Cyclic, Background)
0$UDINT,
2$UDINT,
TO_UDINT(1), (1)$UDINT, 4194303$DINT, 	//_ZAXIS
TO_UDINT(16), (1)$UDINT, 4194303$DINT, 	//REFSWITCHCURRENT3

0$UDINT,
0$UDINT,

0$UDINT,
1$UDINT,
TO_UDINT(1), (100)$UDINT, 4194303$DINT, 	//_ZAXIS

//External connections
0$UDINT,
3$UDINT,
TO_UDINT(1), "ActPosition", C_TRY, TO_UDINT(3059689190), "_DriveAxis1","ActPos",
TO_UDINT(15), "cDriveAxis", C_TRY, TO_UDINT(3059689190), "_DriveAxis1","CmdState",
TO_UDINT(16), "Current", C_DIR, TO_UDINT(3059689190), "_DriveAxis1","ActCurrent",

//Magic internal connections
0$UDINT,
21$UDINT,
TO_UDINT(2), "HWMin", TO_UDINT(1), "HWMin",
TO_UDINT(2), "HWMax", TO_UDINT(1), "HWMax",
TO_UDINT(2), "ZImpulse", TO_UDINT(1), "ZImpulse",
TO_UDINT(2), "RefSwitch", TO_UDINT(1), "RefSwitch",
TO_UDINT(2), "LatchPos", TO_UDINT(1), "LatchPos",
TO_UDINT(4), "LMCAxisBase", TO_UDINT(3), "LMCAxisBase",
TO_UDINT(5), "LMCAxisBase", TO_UDINT(3), "LMCAxisBase",
TO_UDINT(6), "LMCAxisBase", TO_UDINT(3), "LMCAxisBase",
TO_UDINT(7), "LMCAxisBase", TO_UDINT(3), "LMCAxisBase",
TO_UDINT(8), "LMCAxisBase", TO_UDINT(3), "LMCAxisBase",
TO_UDINT(9), "LMCAxisBase", TO_UDINT(3), "LMCAxisBase",
TO_UDINT(10), "LMCAxisBase", TO_UDINT(3), "LMCAxisBase",
TO_UDINT(13), "Provider", TO_UDINT(1), "Provider",
TO_UDINT(13), "Config", TO_UDINT(1), "Config",
TO_UDINT(13), "ID", TO_UDINT(1), "ID",
TO_UDINT(14), "HWReady", TO_UDINT(1), "HWReady",
TO_UDINT(14), "HWError", TO_UDINT(1), "HWError",
TO_UDINT(14), "HWMin", TO_UDINT(1), "HWMin",
TO_UDINT(14), "HWMax", TO_UDINT(1), "HWMax",
TO_UDINT(14), "Emergency", TO_UDINT(1), "Emergency",
TO_UDINT(14), "LMCController", TO_UDINT(1), "LMCController",

//Configuration of timeslots of tasks (RealTime, Cyclic)
#ifdef __LSLLDR_TIMESLOTS__
0$UDINT,
0$UDINT,

0$UDINT,
0$UDINT,

#endif //__LSLLDR_TIMESLOTS__

//MultiMaster connections
#ifdef __LSLLDR_MULTIMASTER__
0$UDINT,
0$UDINT,
#endif //__LSLLDR_MULTIMASTER__

//Configuration for task ID (RealTime, CyclicTime)
#ifdef __LSLLDR_TASKID__
"\\\\TASKS2  "
0$UDINT,
2$UDINT,
(0)$UDINT, 	//_ZAXIS
(0)$UDINT, 	//REFSWITCHCURRENT3

0$UDINT,
0$UDINT,

0$UDINT,
1$UDINT,
(0)$UDINT, 	//_ZAXIS

#endif //__LSLLDR_TASKID__

END_FUNCTION